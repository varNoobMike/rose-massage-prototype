(()=>{"use strict";var t={228:t=>{var e=Object.prototype.hasOwnProperty,n="~";function r(){}function o(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function i(t,e,r,i,a){if("function"!=typeof r)throw new TypeError("The listener must be a function");var u=new o(r,i||t,a),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],u]:t._events[c].push(u):(t._events[c]=u,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function u(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),u.prototype.eventNames=function(){var t,r,o=[];if(0===this._eventsCount)return o;for(r in t=this._events)e.call(t,r)&&o.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(t)):o},u.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var o=0,i=r.length,a=new Array(i);o<i;o++)a[o]=r[o].fn;return a},u.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},u.prototype.emit=function(t,e,r,o,i,a){var u=n?n+t:t;if(!this._events[u])return!1;var c,s,l=this._events[u],f=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),f){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,o),!0;case 5:return l.fn.call(l.context,e,r,o,i),!0;case 6:return l.fn.call(l.context,e,r,o,i,a),!0}for(s=1,c=new Array(f-1);s<f;s++)c[s-1]=arguments[s];l.fn.apply(l.context,c)}else{var p,d=l.length;for(s=0;s<d;s++)switch(l[s].once&&this.removeListener(t,l[s].fn,void 0,!0),f){case 1:l[s].fn.call(l[s].context);break;case 2:l[s].fn.call(l[s].context,e);break;case 3:l[s].fn.call(l[s].context,e,r);break;case 4:l[s].fn.call(l[s].context,e,r,o);break;default:if(!c)for(p=1,c=new Array(f-1);p<f;p++)c[p-1]=arguments[p];l[s].fn.apply(l[s].context,c)}}return!0},u.prototype.on=function(t,e,n){return i(this,t,e,n,!1)},u.prototype.once=function(t,e,n){return i(this,t,e,n,!0)},u.prototype.removeListener=function(t,e,r,o){var i=n?n+t:t;if(!this._events[i])return this;if(!e)return a(this,i),this;var u=this._events[i];if(u.fn)u.fn!==e||o&&!u.once||r&&u.context!==r||a(this,i);else{for(var c=0,s=[],l=u.length;c<l;c++)(u[c].fn!==e||o&&!u[c].once||r&&u[c].context!==r)&&s.push(u[c]);s.length?this._events[i]=1===s.length?s[0]:s:a(this,i)}return this},u.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&a(this,e)):(this._events=new r,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,t.exports=u}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}(()=>{const t=n(228),e={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let r;const o=new Uint8Array(16);function i(){if(!r&&(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(o)}const a=[];for(let t=0;t<256;++t)a.push((t+256).toString(16).slice(1));function u(t,e=0){return a[t[e+0]]+a[t[e+1]]+a[t[e+2]]+a[t[e+3]]+"-"+a[t[e+4]]+a[t[e+5]]+"-"+a[t[e+6]]+a[t[e+7]]+"-"+a[t[e+8]]+a[t[e+9]]+"-"+a[t[e+10]]+a[t[e+11]]+a[t[e+12]]+a[t[e+13]]+a[t[e+14]]+a[t[e+15]]}const c=function(t,n,r){if(e.randomUUID&&!n&&!t)return e.randomUUID();const o=(t=t||{}).random||(t.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,n){r=r||0;for(let t=0;t<16;++t)n[r+t]=o[t];return n}return u(o)};function s(){return t=(new Date).getTime(),parseFloat(t.toString().replace(/(\d{3})$/,".$1"));var t}function l(){return c().replace(/-/g,"")}var f;function p(){return void 0!==window.pdst?f.VersionA:f.VersionB}!function(t){t.VersionA="a",t.VersionB="b"}(f||(f={}));var d={},h=!1,v=function(){d={key:null,lifetime:365,group:null,label:null,experiment:null}};function m(t){return Object.prototype.hasOwnProperty.call(d,t)?d[t]:null}v();var _=function(){return function(t){return"string"==typeof t?t:"number"==typeof t?t.toString():null}},y=function(){return function(t){var e=parseInt(t,10);return isNaN(e)?null:e}},g=function(){return function(t){var e=parseFloat(t);return isNaN(e)?null:e}},w=function(){return function(t){return["True","true","1",1,!0].indexOf(t)>-1||!(["False","false","0",0,!1].indexOf(t)>-1)&&null}},b=function(t){return function(e){var n;if(Array.isArray(e))n=e;else{if(null==e)return null;n=[e]}return t?n.map((function(e){return Object.keys(t).reduce((function(n,r){return n[r]=t[r](e[r]),n}),{})})):n}},O=function(t){return function(e){return e?t?Object.keys(t).reduce((function(n,r){return n[r]=t[r](e[r]),n}),{}):e:{}}};const S=function(){function t(){this.time=s(),this.action=null,this.group=null,this.label=null,this.experiment=null,this.fields={event_id:_()}}return t.prototype.update=function(t){var e=this;t&&Object.keys(this.fields).reduce((function(n,r){r in t&&(e[r]=t[r])}),{})},t.prototype.data=function(){var t=this;return{action:this.action,time:this.time,group:null!==this.group?this.group:m("group"),label:null!==this.label?this.label:m("label"),experiment:null!==this.experiment?this.experiment:m("experiment"),body:Object.keys(this.fields).reduce((function(e,n){return e[n]=t.fields[n](t[n]),e}),{})}},t}();var E,T=(E=function(t,e){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},E(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}E(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),A=function(){return A=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},A.apply(this,arguments)};const j=function(t){function e(e){var n=t.call(this)||this;n.action="view";var r=O({source:_(),placement:_(),from:_()});n.fields=A({url:_(),referrer:_(),inIframe:w(),windowWidth:y(),windowHeight:y(),timezoneOffset:y()},{viewParams:r}),n.url=e.url?e.url:window.location.toString(),n.referrer=e.referrer?e.referrer:document.referrer,n.inIframe=function(){try{return window.self!==window.top}catch(t){return!0}}(),n.windowWidth=window.innerWidth,n.windowHeight=window.innerHeight,n.timezoneOffset=(new Date).getTimezoneOffset();var o={source:e.source?e.source:null,placement:e.placement?e.placement:null,from:e.from?e.from:null};return n.params=o,n}return T(e,t),e}(S);var M=["url","referrer"];var x=function(t,e,n){var r="";if(n){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3),r="; expires=".concat(o.toUTCString())}document.cookie="".concat(t,"=").concat(e).concat(r,"; SameSite=Strict; path=/")},P=function(t){for(var e="".concat(t,"="),n=document.cookie.split(";"),r=0;r<n.length;r+=1){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1,o.length);if(0===o.indexOf(e))return o.substring(e.length,o.length)}return null},k=p()===f.VersionA?"__pdst":"__spdt",N=function(){var t=P(k);return t||(t=l(),x(k,t,m("lifetime")),t=P(k)),t||"0"},C=function(){var t="0";if(window.sessionStorage){var e=sessionStorage.getItem(k);e||(sessionStorage.setItem(k,l()),e=sessionStorage.getItem(k)),t=e||"0"}return t},I={user:N(),session:C(),page:l()};const U=I;var L={},D=function(t){if(!t)return!1;var e,n="spdt-".concat(s(),"-").concat((void 0===e&&(e=1e3),Math.floor(Math.random()*e))),r={order:0,pid:U.page,sid:U.session,event:t};try{r.order=localStorage.length,localStorage.setItem(n,JSON.stringify(r))}catch(t){r.order=Object.keys(L).length,L[n]=r}return!0};var R=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),V=function(){return V=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},V.apply(this,arguments)};const F=function(t){function e(e){var n=t.call(this)||this;n.action="alias",e.alias_id=e.id,e.user_hashed_email=e.email,e.user_hashed_phone_number=e.phone_number,e.click_id?sessionStorage.setItem("click_id",e.click_id):e.click_id=sessionStorage.getItem("click_id"),delete e.id,delete e.email,delete e.phone_number,n.fields=V(V({},n.fields),{alias_id:_(),user_hashed_email:_(),user_hashed_phone_number:_(),partner_user_id:_(),click_id:_()});var r=e.alias_id,o=e.user_hashed_email,i=e.user_hashed_phone_number,a=e.partner_user_id,u=e.click_id;return r&&localStorage.setItem("alias_id",r),o&&localStorage.setItem("user_hashed_email",o),i&&localStorage.setItem("user_hashed_phone_number",i),a&&localStorage.setItem("partner_user_id",a),u&&sessionStorage.setItem("click_id",u),n.update(e),n}return R(e,t),e}(S);var q=[],H=function(t){var e=function(){var t=Object.keys(L).map((function(t){return L[t]}));if(window.localStorage)for(var e=0;e<localStorage.length;e+=1){var n=localStorage.key(e);if(n&&/^spdt-[.\d]+-\d+/.test(n)){var r=localStorage.getItem(n);null!==r&&t.push(JSON.parse(r))}}var o=t.reduce((function(t,e){var n="".concat(e.sid,".").concat(e.pid);return n in t?t[n].push(e):t[n]=[e],t}),{});return Object.keys(o).map((function(t){return o[t].sort((function(t,e){return t.order-e.order}))})).sort((function(t,e){return t[0].order-e[0].order})).map((function(t){return{pid:t[0].pid,sid:t[0].sid,events:t.map((function(t){return t.event}))}}))}();!function(){for(var t=window.localStorage?localStorage.length:0,e=[],n=0;n<=t;n+=1){var r=localStorage.key(n);r&&/^spdt-[.\d]+-\d+/.test(r)&&e.push(r)}e.forEach((function(t){localStorage.removeItem(t)})),L={}}();var n=e.some((function(t){return t.events.some((function(t){return"alias"===t.action}))})),r=localStorage.getItem("alias_id"),o=localStorage.getItem("user_hashed_email"),i=localStorage.getItem("user_hashed_phone_number"),a=localStorage.getItem("partner_user_id"),u=sessionStorage.getItem("click_id");if(!n&&(r||o||i||a||u)){var c={};r&&(c.id=r),o&&(c.email=o),i&&(c.phone_number=i),a&&(c.partner_user_id=a),u&&(c.click_id=u);var l=new F(c).data();e.forEach((function(t){t.events.some((function(t){return"alias"===t.action}))||t.events.push(l)}))}if(0===e.length)return!1;var f=U.page;e.forEach((function(t){t.pid===f&&(q=q.concat(t.events))}));var d=e.map((function(t){var e={pixel_id:m("key")};return Object.assign(t,{uid:U.user,time:s(),pixel_version:"".concat("2.0.9","-").concat(p())},e)}));return t.emit("api.capture",d),!0};function B(t){t.addListener("api.capture",(function(e){(function(t){var e={batch:t};return fetch("https://pixels.spotify.com/v1/ingest",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)}).catch((function(){}))})(e).then((function(){t.emit("api.captured")}))}))}var G=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},W=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function z(t){return G(this,void 0,void 0,(function(){var e,n,r,o;return W(this,(function(i){switch(i.label){case 0:return e=t.trim().toLowerCase(),n=new TextEncoder,r=n.encode(e),[4,crypto.subtle.digest("SHA-256",r)];case 1:return o=i.sent(),[2,Array.from(new Uint8Array(o)).map((function(t){return t.toString(16).padStart(2,"0")})).join("")]}}))}))}var J=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},$=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};var K=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),X=function(){return X=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},X.apply(this,arguments)};const Z=function(t){function e(e){var n=t.call(this)||this;return n.action="product",n.fields=X(X({},n.fields),{value:g(),currency:_(),product_id:_(),product_name:_(),product_type:_(),product_vendor:_()}),n.update(e),n}return K(e,t),e}(S);var Q=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(){return Y=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Y.apply(this,arguments)};const tt=function(t){function e(e){var n=t.call(this)||this;return n.action="addtocart",n.fields=Y(Y({},n.fields),{value:g(),quantity:y(),currency:_(),product_id:_(),product_name:_(),product_type:_(),product_vendor:_(),variant_id:_(),variant_name:_()}),n.update(e),n}return Q(e,t),e}(S);var et=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),nt=function(){return nt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},nt.apply(this,arguments)};const rt=function(t){function e(e){var n=t.call(this)||this;return n.action="purchase",n.fields=nt(nt({},n.fields),{value:g(),quantity:y(),currency:_(),discount_code:_(),order_id:_(),is_new_customer:w(),line_items:b({value:g(),quantity:y(),product_id:_(),product_name:_(),product_type:_(),product_vendor:_(),variant_id:_(),variant_name:_()})}),n.update(e),n}return et(e,t),e}(S);var ot=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),it=function(){return it=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},it.apply(this,arguments)};const at=function(t){function e(e){var n=t.call(this)||this;return n.action="checkout",n.fields=it(it({},n.fields),{value:g(),quantity:y(),currency:_(),discount_code:_(),line_items:b({value:g(),quantity:y(),product_id:_(),product_name:_(),product_type:_(),product_vendor:_(),variant_id:_(),variant_name:_()})}),n.update(e),n}return ot(e,t),e}(S);var ut=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ct=function(){return ct=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ct.apply(this,arguments)};const st=function(t){function e(e){var n=t.call(this)||this;return n.action="lead",n.fields=ct(ct({},n.fields),{type:_(),category:_(),value:g(),currency:_()}),n.update(e),n}return ut(e,t),e}(S);var lt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ft=function(){return ft=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ft.apply(this,arguments)};const pt=function(t){function e(e){var n=t.call(this)||this;return n.action="signup",n.fields=ft(ft({},n.fields),{sign_up_method:_()}),n.update(e),n}return lt(e,t),e}(S);var dt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ht=function(){return ht=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},ht.apply(this,arguments)};const vt=function(t){function e(e){var n=t.call(this)||this;return n.action="click",n.fields=ht(ht({},n.fields),{type:_(),category:_()}),n.update(e),n}return dt(e,t),e}(S);var mt="__spdt_opt_out";var _t=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),yt=function(){return yt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},yt.apply(this,arguments)};const gt=function(t){function e(e,n){var r=t.call(this)||this;return r.action=e,r.fields=yt(yt({},r.fields),{custom_event_name:_(),value:g(),quantity:y(),currency:_(),discount_code:_(),order_id:_(),is_new_customer:w(),type:_(),category:_(),product_id:_(),product_name:_(),product_type:_(),product_vendor:_(),variant_id:_(),variant_name:_(),id:_(),email:_(),line_items:b({value:g(),quantity:y(),product_id:_(),product_name:_(),product_type:_(),product_vendor:_(),variant_id:_(),variant_name:_()}),url:_()}),r.update(n),r}return _t(e,t),e}(S);var wt={CUSTOM_EVENT_1:"custom_event_1",CUSTOM_EVENT_2:"custom_event_2",CUSTOM_EVENT_3:"custom_event_3",CUSTOM_EVENT_4:"custom_event_4",CUSTOM_EVENT_5:"custom_event_5"};var bt=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ot=function(){return Ot=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ot.apply(this,arguments)},St=function(t){function e(e){var n=t.call(this)||this;return n.action="aam",n.fields={aam_user_hashed_email:_(),aam_user_hashed_phone_number:_(),aam_user_hashed_first_name:_(),aam_user_hashed_last_name:_(),aam_user_hashed_date_of_birth:_(),aam_trigger:_()},n.update(e),n}return bt(e,t),e.prototype.data=function(){var e=t.prototype.data.call(this),n=Object.keys(e.body).reduce((function(t,n){var r=e.body[n];return null==r||"string"==typeof r&&"undefined"===r.toLowerCase()||(t[n]=r),t}),{});return Ot(Ot({},e),{body:n})},e}(S);const Et=St;var Tt=function(t){if(!t||"string"!=typeof t)return!1;var e=t.trim();return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)&&e.length>5&&e.length<254},At=function(t){if(!t||"string"!=typeof t)return!1;var e=t.trim().replace(/\D/g,"");return/^\d{6,}$/.test(e)},jt={EMAIL:'[type="email"], [name*="email"], [id*="email"], [name*="mail"], [id*="mail"]',PHONE:'[type="tel"], [name*="phone"], [name*="mobile"], [id*="phone"], [name*="tel"], [id*="tel"]',FIRST_NAME:'[name*="first"], [name*="fname"], [name="firstname"], [name="firstName"], [name="FNAME"], [name*="first_name"], [name*="name_first"], [id="firstName"], [id="firstname"], [name*="full_name"], [name="fullname"], [name*="your-name"], [name*="customer_name"]',LAST_NAME:'[name*="last"], [name*="lname"], [name="lastname"], [name="lastName"], [name="LNAME"], [name*="last_name"], [name*="surname"], [name*="family_name"], [name*="name_last"], [id="lastName"], [id="lastname"]',DATE_OF_BIRTH:'[name*="dob"], [name*="birth"], [id*="dob"], [name*="birthday"], [id*="birthday"]'},Mt={email:jt.EMAIL,phone:jt.PHONE,lastName:jt.LAST_NAME,dateOfBirth:jt.DATE_OF_BIRTH,firstName:jt.FIRST_NAME},xt=["submit","send","sign up"],Pt="submit",kt=750;function Nt(t){var e,n,r=null!==(n=null===(e=t.textContent)||void 0===e?void 0:e.toLowerCase())&&void 0!==n?n:"",o="string"==typeof t.className?t.className.toLowerCase():"",i=t.getAttribute&&t.getAttribute("role")||"";return"submit"===t.type||xt.some((function(t){return r.includes(t)}))||o.includes(Pt)||"button"===i.toLowerCase()}function Ct(t){var e=function(t){return t?Object.entries(t).filter((function(t){var e=t[1];return Boolean(e)})).map((function(t){var e=t[0];return Mt[e]})).filter(Boolean):[]}(t);return e.join(", ")}function It(t){if(!t||"string"!=typeof t)return null;var e=t.trim();if(0===e.length)return null;return e.slice(0,100).replace(/[^a-zA-Z0-9_-]/g,"-")}function Ut(){try{return Boolean(window&&window.__pixelDebug__)}catch(t){return!1}}function Lt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Ut()&&console.log.apply(console,t)}var Dt=function(){return Dt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Dt.apply(this,arguments)},Rt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},Vt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};function Ft(t){var e=this,n=function(){},r=function(r){var o;if(n(),r.enabled){Lt("PIXEL: automatedMatching");var i={email:null,phone:null,first_name:null,last_name:null,date_of_birth:null},a=Ct(null===(o=r.fields)||void 0===o?void 0:o[0]),u=new WeakMap,c=null,s=function(n,r){return Rt(e,void 0,void 0,(function(){var e,o,i,a;return Vt(this,(function(u){switch(u.label){case 0:return n.email?[4,z(n.email)]:[3,2];case 1:return o=u.sent(),[3,3];case 2:o=null,u.label=3;case 3:return e=o,n.phone?[4,z(n.phone)]:[3,5];case 4:return i=u.sent(),[3,6];case 5:i=null,u.label=6;case 6:return a=new Et({aam_user_hashed_email:e,aam_user_hashed_phone_number:i,aam_trigger:r}),t.emit("event",a),[2]}}))}))},l=function(t){var e;if(Lt("[Automated Matching] Event detected:",t.type,t.target),t.target&&"FORM"===t.target.tagName){Lt("[Automated Matching] Form submission detected!");var n=t.target,o=function(t,e){var n=function(e){var n,r=e.selector,o=e.enabled,i=e.validator,a=t.querySelector(r),u=null!==(n=null==a?void 0:a.value)&&void 0!==n?n:"";return o&&u?i&&!i(u)?null:u:null};return{email:n({selector:jt.EMAIL,enabled:null==e?void 0:e.email,validator:Tt}),phone:n({selector:jt.PHONE,enabled:null==e?void 0:e.phone,validator:At}),first_name:n({selector:jt.FIRST_NAME,enabled:null==e?void 0:e.firstName}),last_name:n({selector:jt.LAST_NAME,enabled:null==e?void 0:e.lastName}),date_of_birth:n({selector:jt.DATE_OF_BIRTH,enabled:null==e?void 0:e.dateOfBirth})}}(n,null===(e=r.fields)||void 0===e?void 0:e[0]),i=JSON.stringify({detected_fields:o}),a=Date.now(),c=u.get(n);if(c&&a-c.at<kt&&c.sig===i)return void Lt("[Automated Matching] Duplicate submission suppressed");u.set(n,{at:a,sig:i});var l=Object.values(o).filter((function(t){return null!==t}));if(Lt("[Automated Matching] Field detection results:",{total_found:l.length,detected_fields:o}),l.length>0){Lt("[Automated Matching] Form submission detected");var f=function(t){var e=It(t.id);if(e)return"form:".concat(e);var n=It(t.name);return n?"form:".concat(n):"form"}(n);s(o,f)}else Lt("[Automated Matching] No target fields found in form")}else Lt("[Automated Matching] Event target is not a form:",t.target)},f=function(t){var e,n,r=t.target;if(r instanceof HTMLInputElement&&(o=r,a.length>0&&o.matches(a))){var o,u=null!==(n=null===(e=r.value)||void 0===e?void 0:e.trim())&&void 0!==n?n:"";u&&(r.matches(jt.EMAIL)?(i.email=Tt(u)?u:null,Lt("[Automated Matching] Field value stored:",r.name||r.id||r.type,u)):r.matches(jt.PHONE)?(i.phone=At(u)?u:null,Lt("[Automated Matching] Field value stored:",r.name||r.id||r.type,u)):r.matches(jt.FIRST_NAME)?(i.first_name=u,Lt("[Automated Matching] Field value stored:",r.name||r.id||r.type,u)):r.matches(jt.LAST_NAME)?(i.last_name=u,Lt("[Automated Matching] Field value stored:",r.name||r.id||r.type,u)):r.matches(jt.DATE_OF_BIRTH)&&(i.date_of_birth=u,Lt("[Automated Matching] Field value stored:",r.name||r.id||r.type,u)))}},p=function(t){var e=t.target,n=e.closest("form");n&&Nt(e)?(Lt("[Automated Matching] Click on form submit element detected:",e),l({target:n,type:"click-submit"})):"BUTTON"!==e.tagName&&!Nt(e)||!Object.values(i).some((function(t){return null!==t}))||e.closest("form")||(Lt("[Automated Matching] Non-form submission button clicked:",e),function(){var t=Dt({},i),e=Object.values(t).filter((function(t){return null!==t}));if(Lt("[Automated Matching] Field detection results:",{total_found:e.length,detected_fields:t}),e.length>0){Lt("[Automated Matching] Non-form submission detected");var n=JSON.stringify({detected_fields:t}),r=Date.now();if(c&&r-c.at<kt&&c.sig===n)return void Lt("[Automated Matching] Duplicate non-form submission suppressed");c={at:r,sig:n},s(t,"inputTracking")}i.email=null,i.phone=null,i.first_name=null,i.last_name=null,i.date_of_birth=null}())};document.addEventListener("submit",l,!0),document.addEventListener("click",p,!0),document.addEventListener("input",f,!0);var d=document.querySelectorAll("form");Lt("[Automated Matching] Forms found on page:",d.length,d),Lt("[Automated Matching] Event listener attached to document"),Ut()&&(window.testAutomatedMatching=function(){Lt("[Automated Matching] Manual test triggered");var t=new Event("submit",{bubbles:!0}),e=document.querySelector("form");e?e.dispatchEvent(t):Lt("[Automated Matching] No forms found for manual test")}),Lt("[Automated Matching] Module initialized - try window.testAutomatedMatching() to test"),n=function(){document.removeEventListener("submit",l,!0),document.removeEventListener("click",p,!0),document.removeEventListener("input",f,!0),i.email=null,i.phone=null,i.first_name=null,i.last_name=null,i.date_of_birth=null,Lt("[Automated Matching] Module cleaned up")}}};return t.on("automatedMatchingConfigReady",r),{remove:function(){"function"==typeof t.off&&t.off("automatedMatchingConfigReady",r),n()}}}function qt(t){for(var e={},n=0,r=t;n<r.length;n++){switch(r[n]){case"email":e.email=!0;break;case"phone":e.phone=!0;break;case"firstName":e.firstName=!0;break;case"lastName":e.lastName=!0;break;case"dateOfBirth":e.dateOfBirth=!0}}return e}var Ht=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},Bt=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}},Gt="https://pixels.spotify.com/v1/config",Wt=new Set(["email","phone"]);function zt(){return Ht(this,void 0,void 0,(function(){var t,e,n,r,o,i,a,u;return Bt(this,(function(c){switch(c.label){case 0:c.trys.push([0,3,,4]);try{if("undefined"!=typeof window&&window.__pixelAamDebug__)return Lt("[Automated Matching] Debug override ON: enabling email+phone without server config"),[2,{enabled:!0,fields:[qt(["email","phone"])]}]}catch(t){}return t=void 0,"string"==typeof(e=m("key"))&&e.length>0&&(t=e),t?(Lt("[Automated Matching] Fetching config:",n="".concat(Gt,"/").concat(t)),[4,fetch(n,{headers:{Accept:"application/json"},method:"GET"})]):(Lt("[Automated Matching] No pixel id available yet; skipping config fetch"),[2,{enabled:!1,fields:void 0}]);case 1:return(r=c.sent()).ok?[4,r.json()]:(Lt("[Automated Matching] Config fetch failed:",r.status,r.statusText),[2,{enabled:!1,fields:void 0}]);case 2:return Lt("[Automated Matching] Config response:",o=c.sent()),o&&Array.isArray(o.aamFields)?(Lt("[Automated Matching] Effective AAM fields:",i=o.aamFields.filter((function(t){return Wt.has(t)}))),a=i.length>0,u=qt(i),[2,{enabled:a,fields:a?[u]:void 0}]):[2,{enabled:!1,fields:void 0}];case 3:return Lt("[Automated Matching] Config fetch error:",c.sent()),[2,{enabled:!1,fields:void 0}];case 4:return[2]}}))}))}var Jt=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function u(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}c((r=r.apply(t,e||[])).next())}))},$t=function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(u){return function(c){return function(u){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,u[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&u[0]?r.return:u[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,u[1])).done)return o;switch(r=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return a.label++,{value:u[1],done:!1};case 5:a.label++,r=u[1],u=[0];continue;case 7:u=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==u[0]&&2!==u[0])){a=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){a.label=u[1];break}if(6===u[0]&&a.label<o[1]){a.label=o[1],o=u;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(u);break}o[2]&&a.ops.pop(),a.trys.pop();continue}u=e.call(t,a)}catch(t){u=[6,t],r=0}finally{n=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,c])}}};var Kt=["configure","conf","click","view","alias","signup","custom","product","purchase","addtocart","checkout","lead","custom_event_1","custom_event_2","custom_event_3","custom_event_4","custom_event_5"];var Xt=new t;"function"==typeof window.fetch&&"function"==typeof Array.from&&function(t){(function(){if(P(mt))return!0;var t=window.location.search;return t.slice("?"===t.charAt(0)?1:0).split("&").map((function(t){return t.split("=").map(decodeURIComponent)})).filter((function(t){return"spdt_opt_out"===t[0]})).length>0?(x(mt,"1",3650),!0):void 0})()||(function(t){t.addListener("event",(function(e,n){D(e.data()),!0===n&&t.emit("send.events")}))}(t),function(t){t.addListener("debug.events",(function(e){t.addListener("event",e)}))}(t),function(t){var e=this;t.addListener("alias",(function(n,r){var o=["email","phone_number"].map((function(t){return J(e,void 0,void 0,(function(){var e,r;return $(this,(function(o){switch(o.label){case 0:return n&&Object.prototype.hasOwnProperty.call(n,t)&&"string"==typeof n[t]?(e=n,r=t,[4,z(n[t])]):[3,2];case 1:e[r]=o.sent(),o.label=2;case 2:return[2]}}))}))}));Promise.all(o).then((function(){t.emit("event",new F(n),r)}))}))}(t),function(t){var e=function(e,n){return t.emit("event",new Z(e),n)},n=function(e,n){return t.emit("event",new tt(e),n)},r=function(e,n){return t.emit("event",new rt(e),!1!==n)},o=function(e,n){return t.emit("event",new at(e),n)};t.on("product",e),t.on("PRODUCT",e),t.on("addtocart",n),t.on("ADDTOCART",n),t.on("purchase",r),t.on("PURCHASE",r),t.on("checkout",o),t.on("CHECKOUT",o)}(t),function(t){var e=function(e,n){return t.emit("event",new st(e),!1!==n)},n=function(e,n){return t.emit("event",new pt(e),n)};t.on("lead",e),t.on("LEAD",e),t.on("signup",n),t.on("SIGNUP",n)}(t),function(t){var e=function(e,n){t.emit("event",new vt(e),!1!==n)};t.on("click",e),t.on("CLICK",e)}(t),function(t){var e={},n=function(n,r){n&&n.hasOwnProperty&&M.forEach((function(t){n.hasOwnProperty(t)&&"string"==typeof n[t]&&(e[t]=n[t])})),t.emit("event",new j(e),r)};t.on("view",n),t.on("VIEW",n);var r=new URLSearchParams(window.location.search).get("spclid");r&&sessionStorage.setItem("click_id",r)}(t),B(t),function(t){var e=function(e){h?console.hasOwnProperty("warn")&&console.warn("pixel already configured."):(h=!0,e&&(d=Object.keys(e).reduce((function(t,n){return d.hasOwnProperty(n)&&(t[n]=e[n]),t}),Object.assign({},d))),t.emit("configured",d),t.emit("view"))},n=function(e){h?console.hasOwnProperty("warn")&&console.warn("pixel already configured."):(h=!0,e&&(d=Object.keys(e).reduce((function(t,n){return d.hasOwnProperty(n)&&(t[n]=e[n]),t}),Object.assign({},d))),t.emit("configured",d))};t.on("configure",e),t.on("CONFIGURE",e),t.on("conf",n),t.on("CONF",n)}(t),function(t){var e=function(e,n){var r=new gt("CUSTOM_EVENT_1",e);r.action=wt.CUSTOM_EVENT_1,t.emit("event",r,n)},n=function(e,n){var r=new gt("CUSTOM_EVENT_2",e);r.action=wt.CUSTOM_EVENT_2,t.emit("event",r,n)},r=function(e,n){var r=new gt("CUSTOM_EVENT_3",e);r.action=wt.CUSTOM_EVENT_3,t.emit("event",r,n)},o=function(e,n){var r=new gt("CUSTOM_EVENT_4",e);r.action=wt.CUSTOM_EVENT_4,t.emit("event",r,n)},i=function(e,n){var r=new gt("CUSTOM_EVENT_5",e);r.action=wt.CUSTOM_EVENT_5,t.emit("event",r,n)};t.on("CUSTOM_EVENT_1",e),t.on("custom_event_1",e),t.on("CUSTOM_EVENT_2",n),t.on("custom_event_2",n),t.on("CUSTOM_EVENT_3",r),t.on("custom_event_3",r),t.on("CUSTOM_EVENT_4",o),t.on("custom_event_4",o),t.on("CUSTOM_EVENT_5",i),t.on("custom_event_5",i)}(t),Ft(t),t.once("configured",(function(){!function(t){Jt(this,void 0,void 0,(function(){var e;return $t(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,zt()];case 1:return Lt("[Automated Matching] Loaded config:",e=n.sent()),t.emit("automatedMatchingConfigReady",e),[3,3];case 2:return Lt("[Automated Matching] ERROR: Failed to load automated matching config:",n.sent()),t.emit("automatedMatchingConfigReady",{enabled:!1}),[3,3];case 3:return[2]}}))}))}(t)})),setTimeout((function(){!function(t,e){void 0===e&&(e=5e3),H(t);var n=setInterval((function(){H(t)}),e);setTimeout((function(){clearInterval(n)}),6e6),t.addListener("send.events",(function(){H(t)}))}(t)}),1))}(Xt);var Zt=function(t){console&&"function"==typeof console.warn&&console.warn("[Pixel SDK Warning] ".concat(t))},Qt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length>0){var n=t[0],r=t[1],o=function(t){var e=t.toLowerCase();return Kt.includes(e)?{valid:!0}:{valid:!1,error:"Unsupported event type: '".concat(t,"'. Supported events are: ").concat(Kt.join(", "))}}(n);return o.valid||Zt(o.error||"Invalid event: ".concat(n)),Xt.emit(n,r,t[2]),new Promise((function(t){Xt.once("api.captured",(function(){t()}))}))}return Zt("No event type specified"),Promise.resolve()};window.spdt&&window.spdt.q&&window.spdt.q.length&&window.spdt.q.forEach((function(t){Qt.apply(void 0,t)})),window.pdst&&window.pdst.q&&window.pdst.q.length&&window.pdst.q.forEach((function(t){Qt.apply(void 0,t)})),window.spdt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Qt.apply(void 0,t)},p()===f.VersionA&&(window.pdst=window.spdt),window.hasOwnProperty("onSPDTReady")&&window.onSPDTReady&&window.onSPDTReady(),window.hasOwnProperty("onPDSTReady")&&window.onPDSTReady&&window.onPDSTReady()})()})();